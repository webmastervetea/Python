# Soporte: https://www.linkedin.com/in/oscarlizarragag/

# Este script solicitará al usuario que ingrese el nombre de una ciudad y luego mostrará la temperatura actual, la sensación térmica y una breve descripción del clima.

# **Asegúrate de reemplazar `TU_CLAVE_API_AQUI` con tu clave real de OpenWeatherMap API.** Puedes obtener una clave de API registrándote en su sitio web.

```python
import requests
import json

# --- Configuración ---
# # Reemplaza esta línea con tu clave de API de OpenWeatherMap
API_KEY = "TU_CLAVE_API_AQUI"
BASE_URL = "http://api.openweathermap.org/data/2.5/weather"
# --------------------

# # Función principal para obtener el clima
def obtener_clima(ciudad):
# # Parámetros para la solicitud a la API
    params = {
        'q': ciudad,
        'appid': API_KEY,
        'units': 'metric',  # # Para obtener la temperatura en Celsius
        'lang': 'es'        # # Para obtener la descripción en español
    }

# # Realizar la solicitud GET a la API
    try:
        response = requests.get(BASE_URL, params=params)
# # Verificar si la solicitud fue exitosa (código de estado 200)
        if response.status_code == 200:
# # Analizar la respuesta JSON
            datos = response.json()
            
# # Verificar si la ciudad fue encontrada
            if 'main' in datos:
                
                temp_actual = datos['main']['temp']
                sensacion_termica = datos['main']['feels_like']
                descripcion = datos['weather'][0]['description']
                humedad = datos['main']['humidity']
                
# # Mostrar los resultados
                print("\n# --- Pronóstico del Tiempo para:", ciudad.capitalize(), "---")
                print(f"# Temperatura Actual: **{temp_actual}°C**")
                print(f"# Sensación Térmica: **{sensacion_termica}°C**")
                print(f"# Descripción: **{descripcion.capitalize()}**")
                print(f"# Humedad: **{humedad}%**")
                print("# --------------------------------------------")
            else:
                print(f"# ¡Error! No se pudo encontrar el clima para la ciudad '{ciudad.capitalize()}'.")
                print(f"# Mensaje de la API: {datos.get('message', 'Desconocido')}")
                
        elif response.status_code == 401:
             print("# ¡Error de Autenticación (401)! Asegúrate de que tu clave API es correcta.")
        else:
            print(f"# ¡Error al obtener los datos! Código de estado: {response.status_code}")
            print(f"# Mensaje: {response.json().get('message', 'Desconocido')}")

    except requests.exceptions.RequestException as e:
        print(f"# Ocurrió un error de conexión: {e}")
    except json.JSONDecodeError:
        print("# Ocurrió un error al decodificar la respuesta JSON.")


# # Bucle principal de la aplicación
if __name__ == "__main__":
    
    if API_KEY == "TU_CLAVE_API_AQUI":
        print("# --- ADVERTENCIA ---")
        print("# **Debes reemplazar 'TU_CLAVE_API_AQUI' con tu clave real de OpenWeatherMap API** para que el script funcione.")
        print("# -------------------")
    
    while True:
        try:
            nombre_ciudad = input("\n# Ingresa el nombre de la ciudad (o 'salir' para terminar): ").strip()
            
            if nombre_ciudad.lower() == 'salir':
                print("# ¡Adiós! Gracias por usar el Consumidor de API de Clima.")
                break
            
            if nombre_ciudad:
                obtener_clima(nombre_ciudad)
            else:
                print("# Por favor, ingresa un nombre de ciudad válido.")

        except EOFError:
            print("\n# ¡Adiós! Gracias por usar el Consumidor de API de Clima.")
            break
        except KeyboardInterrupt:
            print("\n# ¡Adiós! Gracias por usar el Consumidor de API de Clima.")
            break

```

