# Soporte: https://www.linkedin.com/in/oscarlizarragag/

# Este script requiere que la librer√≠a **pydub** y **ffmpeg** est√©n instaladas.

# \# 1. Instalar la librer√≠a Python: `pip install pydub`

# \# 2. Instalar el programa FFmpeg: Pydub requiere que FFmpeg o Libav est√©n instalados

# \# \# en tu sistema operativo y accesibles desde la l√≠nea de comandos (en la variable PATH).

```python
import tkinter as tk
from tkinter import filedialog, messagebox
import os
import sys

# # Importar la librer√≠a de audio
try:
    from pydub import AudioSegment
except ImportError:
    messagebox.showerror("Error de Librer√≠a", "pydub no est√° instalado. Ejecuta: pip install pydub")
    sys.exit(1)

class ConversorAudioApp:
    """
    Clase principal que gestiona la GUI y la l√≥gica de conversi√≥n de audio.
    """
    def __init__(self, master):
        # 1. Configuraci√≥n de la Ventana Principal
        self.master = master
        master.title("Conversor de Audio MP3 a WAV")
        master.geometry("450x250")
        master.config(padx=10, pady=10)

        # 2. Variables de Control
        self.ruta_mp3 = tk.StringVar(value="Seleccionar archivo .mp3...")

        # 3. Construcci√≥n de la Interfaz
        self.crear_widgets()

    def crear_widgets(self):
        """
        Crea y coloca todos los widgets de la interfaz.
        """
        # --- T√çTULO ---
        tk.Label(self.master, 
                 text="MP3 a WAV (Requiere FFmpeg)", 
                 font=('Arial', 14, 'bold')).pack(pady=10)
        
        # --- Frame de Selecci√≥n de Archivo ---
        frame_archivo = tk.LabelFrame(self.master, text="Archivo MP3 de Origen", padx=10, pady=10)
        frame_archivo.pack(fill="x", pady=10)

        tk.Entry(frame_archivo, 
                 textvariable=self.ruta_mp3, 
                 state='readonly').pack(fill='x', pady=2)
        
        tk.Button(frame_archivo, 
                  text="Seleccionar MP3", 
                  command=self.seleccionar_mp3).pack(pady=5)

        # --- Bot√≥n de Conversi√≥n ---
        tk.Button(self.master, 
                  text="CONVERTIR A WAV", 
                  command=self.convertir_audio,
                  bg='#9C27B0', fg='white', 
                  font=('Arial', 12, 'bold')).pack(pady=15, fill='x')

    def seleccionar_mp3(self):
        """Abre el di√°logo para seleccionar el archivo MP3."""
        ruta = filedialog.askopenfilename(
            title="Selecciona el archivo MP3",
            filetypes=[("Archivos MP3", "*.mp3")]
        )
        if ruta:
            self.ruta_mp3.set(ruta)

    def convertir_audio(self):
        """
        Carga el archivo MP3 y lo exporta como WAV.
        """
        ruta_origen = self.ruta_mp3.get()
        
        if not os.path.isfile(ruta_origen) or ruta_origen == "Seleccionar archivo .mp3...":
            messagebox.showerror("Error", "Por favor, selecciona un archivo MP3 v√°lido.")
            return
            
        # 1. Definir la ruta de destino (mismo directorio, extensi√≥n .wav)
        directorio = os.path.dirname(ruta_origen)
        nombre_base = os.path.splitext(os.path.basename(ruta_origen))[0]
        ruta_destino = os.path.join(directorio, f"{nombre_base}.wav")
        
        print(f"# üîÑ Convirtiendo: {os.path.basename(ruta_origen)}...")
        
        try:
            # 2. Cargar el archivo MP3 usando pydub
            # # pydub utiliza autom√°ticamente FFmpeg para manejar el formato MP3
            audio = AudioSegment.from_mp3(ruta_origen)
            
            # 3. Exportar el archivo al formato WAV
            # # El formato de destino se infiere de la opci√≥n 'format="wav"'
            audio.export(ruta_destino, format="wav")
            
            messagebox.showinfo("√âxito", f"Conversi√≥n completada con √©xito. Archivo guardado en:\n{ruta_destino}")
            
        except FileNotFoundError:
            # # Este error suele ocurrir si FFmpeg no est√° instalado o no est√° en el PATH
            messagebox.showerror("Error de FFmpeg", 
                                 "FFmpeg no se encuentra. Aseg√∫rate de instalar FFmpeg y a√±adirlo a tu PATH.")
        except Exception as e:
            messagebox.showerror("Error de Conversi√≥n", f"Fallo en la conversi√≥n: {e}")
            print(f"# ‚ùå Error detallado: {e}")


# --- Bloque Principal de Ejecuci√≥n ---

def main():
    root = tk.Tk()
    app = ConversorAudioApp(root)
    print("# Conversor de Audio iniciado. Requiere FFmpeg instalado.")
    root.mainloop()

if __name__ == "__main__":
    main()
```

## üìù Instrucciones Cruciales para Usar el Programa

El paso m√°s importante es la instalaci√≥n de **FFmpeg**, ya que la mayor√≠a de las librer√≠as de Python para MP3 (como `pydub`) lo utilizan como *backend* para decodificar MP3.

### 1\. Instalaci√≥n de Dependencias

  * **Librer√≠a Python:**
    ```bash
    pip install pydub
    ```
  * **FFmpeg (Programa Externo):**
      * **Windows:** Descarga los binarios de FFmpeg, descomprime el archivo y a√±ade la carpeta `bin` a la variable de entorno **PATH** de tu sistema.
      * **macOS (usando Homebrew):** `brew install ffmpeg`
      * **Linux (usando apt):** `sudo apt install ffmpeg`

### 2\. Uso del Script

1.  **Guarda el c√≥digo:** Guarda el c√≥digo Python anterior en un archivo, por ejemplo, `conversor_audio.py`.
2.  **Ejecuta el script:** Abre tu terminal y ejecuta:
    ```bash
    python conversor_audio.py
    ```
3.  **Convierte:** Haz clic en **"Seleccionar MP3"**, elige tu archivo y luego haz clic en **"CONVERTIR A WAV"**. El archivo `.wav` resultante se guardar√° en el mismo directorio que el MP3 original.





